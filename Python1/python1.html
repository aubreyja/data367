<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="YOUR NAME">

<title>Python 1: Baseball Data Analysis with Pandas, pybaseball, and Quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="python1_files/libs/clipboard/clipboard.min.js"></script>
<script src="python1_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="python1_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="python1_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="python1_files/libs/quarto-html/popper.min.js"></script>
<script src="python1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="python1_files/libs/quarto-html/anchor.min.js"></script>
<link href="python1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="python1_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="python1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="python1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="python1_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#academic-integrity-and-collaboration" id="toc-academic-integrity-and-collaboration" class="nav-link" data-scroll-target="#academic-integrity-and-collaboration">Academic integrity and collaboration</a></li>
  <li><a href="#use-of-generative-ai" id="toc-use-of-generative-ai" class="nav-link" data-scroll-target="#use-of-generative-ai">Use of Generative AI</a></li>
  <li><a href="#ai-acknowledgment-statement" id="toc-ai-acknowledgment-statement" class="nav-link" data-scroll-target="#ai-acknowledgment-statement">AI Acknowledgment Statement</a></li>
  <li><a href="#github-classroom-workflow" id="toc-github-classroom-workflow" class="nav-link" data-scroll-target="#github-classroom-workflow">GitHub Classroom workflow</a>
  <ul class="collapse">
  <li><a href="#accept-the-assignment-and-clone-your-repository" id="toc-accept-the-assignment-and-clone-your-repository" class="nav-link" data-scroll-target="#accept-the-assignment-and-clone-your-repository">Accept the assignment and clone your repository</a></li>
  </ul></li>
  <li><a href="#environment-and-packages" id="toc-environment-and-packages" class="nav-link" data-scroll-target="#environment-and-packages">Environment and packages</a>
  <ul class="collapse">
  <li><a href="#required-packages" id="toc-required-packages" class="nav-link" data-scroll-target="#required-packages">Required packages</a></li>
  <li><a href="#import-packages" id="toc-import-packages" class="nav-link" data-scroll-target="#import-packages">Import packages</a></li>
  <li><a href="#sanity-check" id="toc-sanity-check" class="nav-link" data-scroll-target="#sanity-check">Sanity check</a></li>
  </ul></li>
  <li><a href="#a-baseball-dataset-mlb-team-batting-stats" id="toc-a-baseball-dataset-mlb-team-batting-stats" class="nav-link" data-scroll-target="#a-baseball-dataset-mlb-team-batting-stats">A Baseball Dataset: MLB team batting stats</a></li>
  <li><a href="#variables-in-the-dataset" id="toc-variables-in-the-dataset" class="nav-link" data-scroll-target="#variables-in-the-dataset">Variables in the Dataset</a>
  <ul class="collapse">
  <li><a href="#inspect-the-data" id="toc-inspect-the-data" class="nav-link" data-scroll-target="#inspect-the-data">Inspect the data</a></li>
  </ul></li>
  <li><a href="#the-heart-of-the-analysis-asking-the-right-questions" id="toc-the-heart-of-the-analysis-asking-the-right-questions" class="nav-link" data-scroll-target="#the-heart-of-the-analysis-asking-the-right-questions">The Heart of the Analysis: Asking the Right Questions</a>
  <ul class="collapse">
  <li><a href="#our-example-question-r-vs-hr" id="toc-our-example-question-r-vs-hr" class="nav-link" data-scroll-target="#our-example-question-r-vs-hr">Our Example Question: R vs HR</a></li>
  </ul></li>
  <li><a href="#creating-and-plotting-a-linear-model" id="toc-creating-and-plotting-a-linear-model" class="nav-link" data-scroll-target="#creating-and-plotting-a-linear-model">Creating and Plotting a Linear Model</a></li>
  <li><a href="#what-do-we-mean-by-best-fitting-line" id="toc-what-do-we-mean-by-best-fitting-line" class="nav-link" data-scroll-target="#what-do-we-mean-by-best-fitting-line">What Do We Mean by “Best-Fitting Line”?</a></li>
  <li><a href="#important-info-regarding-this-linear-model" id="toc-important-info-regarding-this-linear-model" class="nav-link" data-scroll-target="#important-info-regarding-this-linear-model">Important Info Regarding This Linear Model</a></li>
  <li><a href="#your-turn-building-and-evaluating-new-baseball-statistics" id="toc-your-turn-building-and-evaluating-new-baseball-statistics" class="nav-link" data-scroll-target="#your-turn-building-and-evaluating-new-baseball-statistics">Your Turn: Building and Evaluating New Baseball Statistics</a>
  <ul class="collapse">
  <li><a href="#definitions" id="toc-definitions" class="nav-link" data-scroll-target="#definitions">Definitions</a></li>
  </ul></li>
  <li><a href="#what-to-produce-for-each-new-statistics" id="toc-what-to-produce-for-each-new-statistics" class="nav-link" data-scroll-target="#what-to-produce-for-each-new-statistics">What to produce for each new statistics</a></li>
  <li><a href="#example-batting-average-ba" id="toc-example-batting-average-ba" class="nav-link" data-scroll-target="#example-batting-average-ba">Example: Batting Average (BA)</a>
  <ul class="collapse">
  <li><a href="#create-batting-average" id="toc-create-batting-average" class="nav-link" data-scroll-target="#create-batting-average">Create Batting Average</a></li>
  <li><a href="#scatter-plot-of-runs-vs-ba" id="toc-scatter-plot-of-runs-vs-ba" class="nav-link" data-scroll-target="#scatter-plot-of-runs-vs-ba">Scatter Plot of Runs vs BA</a></li>
  <li><a href="#fit-the-linear-model-and-add-line-to-scatter-plot" id="toc-fit-the-linear-model-and-add-line-to-scatter-plot" class="nav-link" data-scroll-target="#fit-the-linear-model-and-add-line-to-scatter-plot">Fit the Linear Model and Add Line to Scatter Plot</a></li>
  <li><a href="#extract-key-quantities" id="toc-extract-key-quantities" class="nav-link" data-scroll-target="#extract-key-quantities">Extract Key Quantities</a></li>
  <li><a href="#add-the-best-fit-line-to-the-plot" id="toc-add-the-best-fit-line-to-the-plot" class="nav-link" data-scroll-target="#add-the-best-fit-line-to-the-plot">Add the Best-Fit Line to the Plot</a></li>
  <li><a href="#write-your-interpretation-ba" id="toc-write-your-interpretation-ba" class="nav-link" data-scroll-target="#write-your-interpretation-ba">Write Your Interpretation (BA)</a></li>
  </ul></li>
  <li><a href="#your-turn-slg-obp-and-ops" id="toc-your-turn-slg-obp-and-ops" class="nav-link" data-scroll-target="#your-turn-slg-obp-and-ops">Your Turn: SLG, OBP, and OPS</a>
  <ul class="collapse">
  <li><a href="#slugging-percentage-slg" id="toc-slugging-percentage-slg" class="nav-link" data-scroll-target="#slugging-percentage-slg">Slugging Percentage (SLG)</a></li>
  <li><a href="#on-base-percentage-obp" id="toc-on-base-percentage-obp" class="nav-link" data-scroll-target="#on-base-percentage-obp">On-Base Percentage (OBP)</a></li>
  <li><a href="#ops-on-base-plus-slugging" id="toc-ops-on-base-plus-slugging" class="nav-link" data-scroll-target="#ops-on-base-plus-slugging">OPS (On-Base Plus Slugging)</a></li>
  </ul></li>
  <li><a href="#when-youre-done" id="toc-when-youre-done" class="nav-link" data-scroll-target="#when-youre-done">When You’re Done</a></li>
  <li><a href="#submission" id="toc-submission" class="nav-link" data-scroll-target="#submission">Submission</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Python 1: Baseball Data Analysis with Pandas, pybaseball, and Quarto</h1>
<p class="subtitle lead">DATA 367 — Intro Sports Analytics Workflow</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>YOUR NAME </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Invalid Date</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>In this assignment you will:</p>
<ul>
<li>set up a basic <strong>sports analytics</strong> workflow in <strong>Python</strong> using <strong>pandas</strong> and <strong>numpy</strong>,</li>
<li>access a real baseball dataset using the <strong>pybaseball</strong> library,</li>
<li>answer a clearly stated baseball question using <strong>correlation</strong> and a simple <strong>regression</strong>,</li>
<li>write up your analysis in <strong>Quarto</strong> (<code>.qmd</code>),</li>
<li>and use <strong>Git + GitHub Classroom</strong> to <strong>clone</strong>, <strong>commit</strong>, and <strong>push</strong> your work.</li>
</ul>
<p>This assignment is designed to introduce you of (or remind you of) the pieces of a typical data analysis pipeline (load → clean → explore → model → communicate), and to get you comfortable using a sports data library and the GitHub Classroom workflow.</p>
<hr>
</section>
<section id="academic-integrity-and-collaboration" class="level2">
<h2 class="anchored" data-anchor-id="academic-integrity-and-collaboration">Academic integrity and collaboration</h2>
<p>You may discuss <em>ideas</em> and <em>debugging strategies</em> with classmates, but your code, figures, and written analysis must be your own work unless your instructor explicitly authorizes collaboration. If you use an external source (AI, documentation, blog post, etc.), cite it in a short note.</p>
</section>
<section id="use-of-generative-ai" class="level2">
<h2 class="anchored" data-anchor-id="use-of-generative-ai">Use of Generative AI</h2>
<p>Generative AI tools are increasingly used in contemporary professional data-science practice, and their thoughtful use is permitted for this assignment. However, you are a student developing professional skills, not yet a practicing professional. You are therefore fully responsible for the correctness, clarity, and quality of all work you submit, including verifying any AI-generated suggestions and making independent decisions about methods, code, and interpretation.</p>
<p>AI tools may assist with brainstorming, explanation, or coding support, but you should consider whether your use of AI is helping you build the skills required of a successful data-science professional, or merely reproducing output you do not fully understand.</p>
<p>Any use of generative AI must be explicitly acknowledged. Failure to disclose AI use may be considered a violation of the Code of Academic Integrity. If you are unsure whether a particular use of AI is appropriate for this assignment, please ask before submitting.</p>
</section>
<section id="ai-acknowledgment-statement" class="level2">
<h2 class="anchored" data-anchor-id="ai-acknowledgment-statement">AI Acknowledgment Statement</h2>
<p>I acknowledge the use of [AI system name(s)] to [describe how the tool was used]. Prompts used included [link or pasted prompt(s)].</p>
<hr>
</section>
<section id="github-classroom-workflow" class="level2">
<h2 class="anchored" data-anchor-id="github-classroom-workflow">GitHub Classroom workflow</h2>
<section id="accept-the-assignment-and-clone-your-repository" class="level3">
<h3 class="anchored" data-anchor-id="accept-the-assignment-and-clone-your-repository">Accept the assignment and clone your repository</h3>
<p><strong>Accept the assignment</strong> using the GitHub Classroom link provided on the course site. After acceptance, you will have your own private repository on <a href="https://github.com" title="Github">GitHub</a>.</p>
<p>Now clone the assignment to your computer. To do this in Positron, first open positron. You can either click <strong>New</strong> in the upper left hand corner, and then choose <strong>New Folder From Git…</strong>, or you can choose <strong>New Folder From Git</strong> in the center of the screen:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/new-from-homescreen.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="423"></p>
</figure>
</div>
<p>Next you will see this dialogue box:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/new-folder-from-git.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="364"></p>
</figure>
</div>
<p>In the box below “Git repository URL” paste your GitHub Classroom repository URL. In the box below “Create folder as a subfolder of” decide where on your computer you would like to keep the code for this class, type in that directory, and click OK.</p>
<p>Now open the python1<code>.qmd</code> file in the editor</p>
<hr>
</section>
</section>
<section id="environment-and-packages" class="level2">
<h2 class="anchored" data-anchor-id="environment-and-packages">Environment and packages</h2>
<section id="required-packages" class="level3">
<h3 class="anchored" data-anchor-id="required-packages">Required packages</h3>
<p>We will use the following python packages in this assignment:</p>
<ul>
<li><code>pandas</code> and <code>numpy</code> (core data analysis)</li>
<li><code>matplotlib</code> (plots)</li>
<li><code>statsmodels</code> (simple regression and statistical summaries)</li>
</ul>
<p>If you do not have them installed, you will find out when you try executing the code below. If you get an error message that a package is missing, then install it using the <a href="https://packaging.python.org/en/latest/tutorials/installing-packages/">instructions for your system</a>.</p>
</section>
<section id="import-packages" class="level3">
<h3 class="anchored" data-anchor-id="import-packages">Import packages</h3>
<p>Every python script will begin by <em>importing</em> packages. A python package is a library of code that contains certain tools. Python’s standard library is intentionally small. So most data analysis work relies on <strong>external packages</strong> (also called <em>modules</em> or <em>libraries</em>) that extend Python with tools for data handling, visualization, and statistical modeling. Before you can use a package, you must <strong>import</strong> it.</p>
<p>In the code block below, we import the packages needed for this assignment. Run this cell.</p>
<div id="f641b4a4" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic regression</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>In Python, we use the import statement to bring in tools from external libraries. However, how we write that statement changes how we access those tools in our code.</p>
<p>Here is a breakdown of the common patterns you will see in this assignment and throughout the industry:</p>
<ol type="1">
<li><p>Importing with Aliases (as): Most major data science libraries have “standard” aliases. While you could technically name them anything, using these conventions makes your code readable to other analysts.</p>
<p><code>import pandas as pd</code>: Instead of typing <code>pandas.DataFrame()</code>, you just type <code>pd.DataFrame()</code>.<br>
<br>
<code>import numpy as np</code>: Shortens the frequent calls to math functions.</p></li>
<li><p>The f<code>rom ... import ...</code> style: This is used when you only need a specific “tool” (a function or class) from a large library, rather than the whole thing.<br>
When to use it: Use this for specific tasks, like from <code>pybaseball import batting_stats</code>. This allows you to call <code>batting_stats()</code> directly without typing <code>pybaseball.batting_stats()</code>.</p>
<p>Why use it: It keeps your code “cleaner” and can slightly improve performance by not loading unnecessary parts of a large package into your local namespace.</p></li>
<li><p>Namespace Safety: The main reason we use pd. or np. prefixes (the “namespace”) is to avoid naming collisions. If you imported everything directly and two different libraries both had a function named mean(), Python wouldn’t know which one you intended to use. Prefixes act like “last names” for functions to keep them distinct.</p></li>
</ol>
</section>
<section id="sanity-check" class="level3">
<h3 class="anchored" data-anchor-id="sanity-check">Sanity check</h3>
<p>A <strong>sanity check</strong> is a quick, low-stakes test to ensure your environment is behaving as expected before you start your analysis.</p>
<div id="305fe1a7" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"numpy:"</span>, np.__version__)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"pandas:"</span>, pd.__version__)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>numpy: 1.26.4
pandas: 2.2.2</code></pre>
</div>
</div>
<p>When we print <code>__version__</code>, we are verifying:</p>
<ul>
<li><p><strong>Installation:</strong> That the library is actually installed and accessible.</p></li>
<li><p><strong>Pathing:</strong> That Quarto is using the correct Python environment.</p></li>
<li><p><strong>Compatibility:</strong> That we are using a version of the library that supports the features we plan to use.</p></li>
</ul>
<hr>
</section>
</section>
<section id="a-baseball-dataset-mlb-team-batting-stats" class="level2">
<h2 class="anchored" data-anchor-id="a-baseball-dataset-mlb-team-batting-stats">A <a href="https://en.wikipedia.org/wiki/Baseball">Baseball</a> Dataset: <a href="https://en.wikipedia.org/wiki/Major_League_Baseball">MLB</a> team batting stats</h2>
<p>The data given in <code>BaseballRuns.csv</code> shows offensive statistics for MLB teams from 2000–2005.</p>
<p>Import the data into Python using the following code. Run this cell.</p>
<div id="2d345129" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data. Notice that</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">## 1. We use the "read_csv" function from the pandas library that we imported above with the alias "pd"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">## 2. This returns what is called a "data frame" which we have given the name bbr</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>bbr <span class="op">=</span> pd.read_csv(<span class="st">"data/BaseballRuns.csv"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="variables-in-the-dataset" class="level2">
<h2 class="anchored" data-anchor-id="variables-in-the-dataset">Variables in the Dataset</h2>
<p>The first thing you must understand about any data set is what information it contains. In the data set we just loaded we have the following varaibles:</p>
<ul>
<li><code>lg</code> — league (AL for American League, NL for National League)</li>
<li><code>team</code> — city of team (three-letter abbreviation)</li>
<li><code>G</code> — number of games played (162 is normal)</li>
<li><code>Ghome</code> — number of home games played (81 is normal)</li>
<li><code>W</code> — number of wins</li>
<li><code>L</code> — number of losses</li>
<li><code>R</code> — number of runs scored</li>
<li><code>AB</code> — number of at bats</li>
<li><code>X1B</code> — number of singles</li>
<li><code>X2B</code> — number of doubles</li>
<li><code>X3B</code> — number of triples</li>
<li><code>HR</code> — number of homeruns</li>
<li><code>BB</code> — number of walks</li>
<li><code>SO</code> — number of strikeouts</li>
<li><code>SB</code> — number of stolen bases</li>
<li><code>CS</code> — number of times caught stealing</li>
<li><code>HBP</code> — number of batters hit by pitch</li>
<li><code>SF</code> — number of sacrifice flies</li>
</ul>
<section id="inspect-the-data" class="level3">
<h3 class="anchored" data-anchor-id="inspect-the-data">Inspect the data</h3>
<p>In data analysis, we never assume the data is “clean” just because it loaded. We use exploratory functions to orient ourselves. Here is a breakdown of some data inspection functions we can use. You can use some or all of these to get a sense for a new data set, and you will learn other useful data inspection functions and techniques as you gain experience.</p>
<p><code>bbr.head()</code></p>
<p><strong>What it does</strong>: Returns the first 5 rows of the DataFrame.</p>
<p><strong>Why do it</strong>: This is your first “look” at the data. It confirms that the columns aligned correctly and gives you a sense of the data types (e.g., are the team names strings? are the stats decimals?).</p>
<div id="b2388d67" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>bbr.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">lg</th>
<th data-quarto-table-cell-role="th">team</th>
<th data-quarto-table-cell-role="th">G</th>
<th data-quarto-table-cell-role="th">Ghome</th>
<th data-quarto-table-cell-role="th">W</th>
<th data-quarto-table-cell-role="th">L</th>
<th data-quarto-table-cell-role="th">R</th>
<th data-quarto-table-cell-role="th">AB</th>
<th data-quarto-table-cell-role="th">H</th>
<th data-quarto-table-cell-role="th">1B</th>
<th data-quarto-table-cell-role="th">2B</th>
<th data-quarto-table-cell-role="th">3B</th>
<th data-quarto-table-cell-role="th">HR</th>
<th data-quarto-table-cell-role="th">BB</th>
<th data-quarto-table-cell-role="th">SO</th>
<th data-quarto-table-cell-role="th">SB</th>
<th data-quarto-table-cell-role="th">CS</th>
<th data-quarto-table-cell-role="th">HBP</th>
<th data-quarto-table-cell-role="th">SF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>2000</td>
<td>AL</td>
<td>ANA</td>
<td>162</td>
<td>81</td>
<td>82</td>
<td>80</td>
<td>864</td>
<td>5628</td>
<td>1574</td>
<td>995</td>
<td>309</td>
<td>34</td>
<td>236</td>
<td>608</td>
<td>1024</td>
<td>93</td>
<td>52</td>
<td>47</td>
<td>43</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2000</td>
<td>AL</td>
<td>BAL</td>
<td>162</td>
<td>81</td>
<td>74</td>
<td>88</td>
<td>794</td>
<td>5549</td>
<td>1508</td>
<td>992</td>
<td>310</td>
<td>22</td>
<td>184</td>
<td>558</td>
<td>900</td>
<td>126</td>
<td>65</td>
<td>49</td>
<td>54</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>2000</td>
<td>AL</td>
<td>BOS</td>
<td>162</td>
<td>81</td>
<td>85</td>
<td>77</td>
<td>792</td>
<td>5630</td>
<td>1503</td>
<td>988</td>
<td>316</td>
<td>32</td>
<td>167</td>
<td>611</td>
<td>1019</td>
<td>43</td>
<td>30</td>
<td>42</td>
<td>48</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>2000</td>
<td>AL</td>
<td>CHA</td>
<td>162</td>
<td>81</td>
<td>95</td>
<td>67</td>
<td>978</td>
<td>5646</td>
<td>1615</td>
<td>1041</td>
<td>325</td>
<td>33</td>
<td>216</td>
<td>591</td>
<td>960</td>
<td>119</td>
<td>42</td>
<td>53</td>
<td>61</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>2000</td>
<td>AL</td>
<td>CLE</td>
<td>162</td>
<td>81</td>
<td>90</td>
<td>72</td>
<td>950</td>
<td>5683</td>
<td>1639</td>
<td>1078</td>
<td>310</td>
<td>30</td>
<td>221</td>
<td>685</td>
<td>1057</td>
<td>113</td>
<td>34</td>
<td>51</td>
<td>52</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><code>bbr.shape</code></p>
<p><strong>What it does</strong>: Returns a tuple representing the dimensionality: (rows, columns). (Note: This is an attribute, not a function, so it doesn’t use parentheses).</p>
<p><strong>Why do it</strong>: It tells you the scale of your dataset. If you expected 30 teams but see 600 rows, you know you’ve likely pulled multi-year data or individual player stats instead of team stats.</p>
<div id="5981fed1" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bbr.shape</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>(180, 20)</code></pre>
</div>
</div>
<p><code>bbr.columns</code></p>
<p><strong>What it does</strong>: Lists the names of every column in the dataset.</p>
<p><strong>Why do it</strong>: <code>pybaseball</code> datasets often have over 300 columns. You need the exact spelling and capitalization of column names (e.g., is it R or runs?) to select them later without causing KeyErrors.</p>
<div id="1a38386c" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>bbr.columns</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>Index(['year', 'lg', 'team', 'G', 'Ghome', 'W', 'L', 'R', 'AB', 'H', '1B',
       '2B', '3B', 'HR', 'BB', 'SO', 'SB', 'CS', 'HBP', 'SF'],
      dtype='object')</code></pre>
</div>
</div>
<p><code>bbr.describe()</code></p>
<p><strong>What it does</strong>: We can get a summary of what is in this data frame. For each numerical variable gives total count, and gives mean, standard deviation, and quartiles.</p>
<p><strong>What do it</strong>: Gives an initial sense of the scope of the data and some basic summary statistics.</p>
<div id="98d9fc35" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>bbr.describe()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">G</th>
<th data-quarto-table-cell-role="th">Ghome</th>
<th data-quarto-table-cell-role="th">W</th>
<th data-quarto-table-cell-role="th">L</th>
<th data-quarto-table-cell-role="th">R</th>
<th data-quarto-table-cell-role="th">AB</th>
<th data-quarto-table-cell-role="th">H</th>
<th data-quarto-table-cell-role="th">1B</th>
<th data-quarto-table-cell-role="th">2B</th>
<th data-quarto-table-cell-role="th">3B</th>
<th data-quarto-table-cell-role="th">HR</th>
<th data-quarto-table-cell-role="th">BB</th>
<th data-quarto-table-cell-role="th">SO</th>
<th data-quarto-table-cell-role="th">SB</th>
<th data-quarto-table-cell-role="th">CS</th>
<th data-quarto-table-cell-role="th">HBP</th>
<th data-quarto-table-cell-role="th">SF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">count</th>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
<td>180.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">mean</th>
<td>2002.500000</td>
<td>161.922222</td>
<td>80.883333</td>
<td>80.933333</td>
<td>80.933333</td>
<td>773.650000</td>
<td>5552.950000</td>
<td>1472.038889</td>
<td>969.650000</td>
<td>294.577778</td>
<td>30.672222</td>
<td>177.138889</td>
<td>542.266667</td>
<td>1046.816667</td>
<td>91.683333</td>
<td>40.633333</td>
<td>59.455556</td>
<td>46.394444</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">std</th>
<td>1.712589</td>
<td>0.373053</td>
<td>0.609744</td>
<td>12.510822</td>
<td>12.512608</td>
<td>83.539137</td>
<td>80.080705</td>
<td>74.951110</td>
<td>56.970979</td>
<td>26.225272</td>
<td>8.288668</td>
<td>33.139246</td>
<td>74.503766</td>
<td>100.378305</td>
<td>30.086927</td>
<td>12.056154</td>
<td>12.781499</td>
<td>9.244353</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">min</th>
<td>2000.000000</td>
<td>161.000000</td>
<td>77.000000</td>
<td>43.000000</td>
<td>46.000000</td>
<td>574.000000</td>
<td>5330.000000</td>
<td>1300.000000</td>
<td>850.000000</td>
<td>201.000000</td>
<td>12.000000</td>
<td>116.000000</td>
<td>363.000000</td>
<td>805.000000</td>
<td>31.000000</td>
<td>12.000000</td>
<td>29.000000</td>
<td>25.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">25%</th>
<td>2001.000000</td>
<td>162.000000</td>
<td>81.000000</td>
<td>71.000000</td>
<td>71.000000</td>
<td>714.000000</td>
<td>5496.750000</td>
<td>1422.500000</td>
<td>933.000000</td>
<td>277.750000</td>
<td>25.000000</td>
<td>152.000000</td>
<td>489.000000</td>
<td>984.250000</td>
<td>69.000000</td>
<td>32.750000</td>
<td>51.000000</td>
<td>40.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">50%</th>
<td>2002.500000</td>
<td>162.000000</td>
<td>81.000000</td>
<td>82.000000</td>
<td>80.000000</td>
<td>768.000000</td>
<td>5545.000000</td>
<td>1470.000000</td>
<td>966.500000</td>
<td>293.000000</td>
<td>30.000000</td>
<td>173.500000</td>
<td>536.500000</td>
<td>1040.500000</td>
<td>88.500000</td>
<td>40.000000</td>
<td>58.000000</td>
<td>46.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">75%</th>
<td>2004.000000</td>
<td>162.000000</td>
<td>81.000000</td>
<td>91.000000</td>
<td>91.000000</td>
<td>828.500000</td>
<td>5609.750000</td>
<td>1516.500000</td>
<td>1000.500000</td>
<td>310.250000</td>
<td>36.000000</td>
<td>200.000000</td>
<td>593.500000</td>
<td>1099.000000</td>
<td>109.250000</td>
<td>48.000000</td>
<td>67.000000</td>
<td>52.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">max</th>
<td>2005.000000</td>
<td>163.000000</td>
<td>82.000000</td>
<td>116.000000</td>
<td>119.000000</td>
<td>978.000000</td>
<td>5769.000000</td>
<td>1667.000000</td>
<td>1186.000000</td>
<td>373.000000</td>
<td>61.000000</td>
<td>260.000000</td>
<td>775.000000</td>
<td>1399.000000</td>
<td>177.000000</td>
<td>74.000000</td>
<td>95.000000</td>
<td>75.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><code>bbr.isna().sum().sort_values(ascending=False).head(15)</code></p>
<p>This is a “chained” command that performs several operations at once to check for missingness:</p>
<p><code>.isna()</code>: Checks every cell to see if it is empty (NaN).</p>
<p><code>.sum()</code>: Counts the number of True (missing) values for each column.</p>
<p><code>.sort_values(ascending=False)</code>: Puts the columns with the most missing data at the top.</p>
<p><code>.head(15)</code>: Limits the output to the top 15 “offenders.”</p>
<p><strong>Why do it</strong>: Missing data can break your math. If a column you plan to use as a predictor is 50% empty, your regression results will be misleading or your code will crash. This identifies those landmines early.</p>
<div id="9dd1fe81" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>bbr.isna().<span class="bu">sum</span>().sort_values(ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">15</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>year    0
lg      0
HBP     0
CS      0
SB      0
SO      0
BB      0
HR      0
3B      0
2B      0
1B      0
H       0
AB      0
R       0
L       0
dtype: int64</code></pre>
</div>
</div>
<p>The above output tells us none of the variables have any empty data.</p>
</section>
</section>
<section id="the-heart-of-the-analysis-asking-the-right-questions" class="level2">
<h2 class="anchored" data-anchor-id="the-heart-of-the-analysis-asking-the-right-questions">The Heart of the Analysis: Asking the Right Questions</h2>
<p>Ok, this gets us some data ready to work with, but let’s change directions a bit and take a braoder view.</p>
<p>In sports analytics, we aren’t just “calculating numbers”; we are trying to solve puzzles. A typical front-office inquiry often starts with a simple, high-stakes question: <strong>“What actually drives winning?”</strong> or <strong>“What metric best predicts our ability to score?”</strong></p>
<p>To be a good sports data scientist, you need to understand your sport, what data is available, and how to analyze it. Let’s now talk a bit about data analysis. While modern “black-box” machine learning models are popular, they aren’t always necessary. Often, a clean <strong>correlation</strong> or a <strong>simple linear regression</strong> provides the clarity needed to make a multi-million dollar decision.</p>
<section id="our-example-question-r-vs-hr" class="level3">
<h3 class="anchored" data-anchor-id="our-example-question-r-vs-hr">Our Example Question: R vs HR</h3>
<p>If you’re not familiar with baseball, a <em>run</em> (<strong>R</strong>) in baseball is any point scored when a player touches home plate safely.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>Whichever team ends the game with the most runs wins the game. So, predicting who will win a baseball game means predicting which team will score the most runs.</p>
<p>Now, a <em>home run</em> (<strong>HR</strong>) is a specific type of play where the batter hits the ball over the fence (or rounds all bases) to score at least one run. A single home run can result in 1 to 4 runs.</p>
<p>So, every home run scores at least one run, but not every run is a homerun. However, one would think that a team that scores more home run is likely to score more runs over all.</p>
</section>
</section>
<section id="creating-and-plotting-a-linear-model" class="level2">
<h2 class="anchored" data-anchor-id="creating-and-plotting-a-linear-model">Creating and Plotting a Linear Model</h2>
<p>To investigate this hunch, let us plot <code>HR</code> versus <code>R</code>:</p>
<div id="627d279c" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the pyplot module from the matplotlib library.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># matplotlib is a very common Python library used for creating plots and charts.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The 'pyplot' part provides a simple interface for making figures.</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># We import it as 'plt' by convention, to keep later commands short and readable.</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new, empty figure (a plotting window).</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Think of a "figure" as a blank piece of graph paper where we can draw a plot.</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># If you do not explicitly create a figure, matplotlib will still make one,</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co"># but being explicit is good practice, especially as plots get more complex.</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a scatter plot.</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># A scatter plot shows individual data points as dots.</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co"># bbr["HR"] provides the values for the x-axis (horizontal axis).</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># In this case, these are the number of home runs.</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co"># bbr["R"] provides the values for the y-axis (vertical axis).</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="co"># In this case, these are the number of runs scored.</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Each row of the data produces one dot on the plot.</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>plt.scatter(bbr[<span class="st">"HR"</span>], bbr[<span class="st">"R"</span>])</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Label the x-axis.</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co"># This text will appear below the horizontal axis,</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="co"># helping the reader understand what the x-values represent.</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Homeruns"</span>)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Label the y-axis.</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="co"># This text will appear to the left of the vertical axis,</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="co"># explaining what the y-values represent.</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Runs"</span>)</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a title to the plot.</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a><span class="co"># The title appears at the top of the figure and summarizes</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a><span class="co"># what relationship the plot is showing.</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Runs vs Homeruns"</span>)</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot on the screen.</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Without this line, the plot may not appear,</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a><span class="co"># especially when running the code as a script.</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="python1_files/figure-html/cell-10-output-1.png" width="593" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can see that there seems to be a general positive correlation. That is, as the number of homeruns increases (along the x-axis), the number of runs tends to increase as well.</p>
<p>We can now create the “best-fitting line” for this data:</p>
<div id="db57aac4" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the formula-based interface from the statsmodels library.</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># statsmodels is a Python library used for statistical modeling.</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># It provides tools for fitting linear regression models, hypothesis tests,</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># and other classical statistical methods.</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The 'formula.api' submodule allows us to specify models using</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># a formula syntax that looks very similar to what you might see in R or statistics textbooks.</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We import it as 'smf' by convention, which is short for "statsmodels formula".</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a linear regression model using Ordinary Least Squares (OLS).</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># The string "R ~ HR" is the model formula:</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   - 'R' is the response (dependent) variable.</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   - 'HR' is the predictor (independent) variable.</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   - The '~' symbol means "is modeled as a function of".</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co"># In words, this model says:</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   "We are modeling Runs (R) as a linear function of Home Runs (HR)."</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co"># The 'data=bbr' argument tells statsmodels where to find the variables</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co"># named in the formula. In this case, 'bbr' is a DataFrame that contains</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co"># columns named 'R' and 'HR'.</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co"># smf.ols(...) creates the regression model object,</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co"># but it does NOT actually compute the regression yet.</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co"># The '.fit()' method runs the regression calculations</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co"># and estimates the slope, intercept, and other statistics.</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co"># The fitted model is stored in the variable 'g'.</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> smf.ols(<span class="st">"R ~ HR"</span>, data<span class="op">=</span>bbr).fit()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>This stores the line — and much information about this line — in the variable <code>g</code>. This command itself doesn’t return any output, but we can see the intercept and slope of this line by calling the <code>params</code> method of <code>g</code>:</p>
<div id="30fc8dbd" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access the estimated parameters (coefficients) of the fitted regression model.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 'g' is the fitted regression model that we created earlier using .fit().</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># After fitting the model, statsmodels stores the estimated numerical results</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inside this object.</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The '.params' attribute contains the regression coefficients.</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># These are the numbers that define the fitted line.</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># For a simple linear regression like R ~ HR, this will typically include:</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   - 'Intercept': the estimated value of R when HR = 0</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   - 'HR': the estimated change in R for a one-unit increase in HR</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Conceptually, these parameters describe the equation of the fitted line:</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   R ≈ Intercept + (HR coefficient) × HR</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co"># When you run this line in Python, it will display the coefficients,</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># usually as a labeled pandas Series.</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>g.params</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>Intercept    452.358365
HR             1.813784
dtype: float64</code></pre>
</div>
</div>
<p>We add this line to the plot as follows:</p>
<div id="0d5d9060" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new, empty figure for our plot.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># As before, a figure is the "canvas" on which we draw our visualization.</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a scatter plot of the original data.</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Each point represents one observation (for example, one team or one season).</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># The x-values come from the "HR" column (home runs).</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co"># The y-values come from the "R" column (runs scored).</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>plt.scatter(bbr[<span class="st">"HR"</span>], bbr[<span class="st">"R"</span>])</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Label the x-axis so the reader knows what the horizontal values represent.</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Homeruns"</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Label the y-axis so the reader knows what the vertical values represent.</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Runs"</span>)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a title that summarizes what relationship is being visualized.</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Runs vs Homeruns"</span>)</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------------</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the fitted regression line to the scatterplot</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------------</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Store the x-values (home runs) in a variable.</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co"># This makes the next steps easier to read and understand.</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> bbr[<span class="st">"HR"</span>]</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the predicted y-values using the fitted regression model.</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="co"># g.params contains the estimated regression coefficients:</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="co">#   g.params[0] is the intercept (the predicted number of runs when HR = 0)</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="co">#   g.params[1] is the slope (how much runs increase for each additional home run)</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="co"># The regression line has the form:</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="co">#   y_hat = intercept + slope * x</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Here, y_hat represents the model's predicted runs for each value of HR.</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>y_hat <span class="op">=</span> g.params[<span class="st">"Intercept"</span>] <span class="op">+</span> g.params[<span class="st">"HR"</span>] <span class="op">*</span> x</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the regression line on the same figure.</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.plot draws a line instead of points.</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Because we use the same x-values as the scatter plot,</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a><span class="co"># the line overlays the data and shows the fitted linear trend.</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y_hat)</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the completed plot on the screen.</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a><span class="co"># This shows both the original data (points) and the fitted regression line.</span></span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="python1_files/figure-html/cell-13-output-1.png" width="593" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="what-do-we-mean-by-best-fitting-line" class="level2">
<h2 class="anchored" data-anchor-id="what-do-we-mean-by-best-fitting-line">What Do We Mean by “Best-Fitting Line”?</h2>
<p>The equation for this best-fitting line is:</p>
<pre><code>R = 452.358 + 1.815 · HR</code></pre>
<p>We can use this equation (model) to predict how many runs a team scored based on how many homeruns they hit.</p>
<p>For example, the 2000 Anaheim Angels (ANA) hit 236 homeruns, so our model predicts they scored 880.698 runs. They actually scored 864 runs. The difference between the predicted number of runs and the actual number of runs is called a <em>residual</em>. In this case, the residual is 16.698.</p>
<p>We can use Python to calculate the predicted number of runs scored for each team:</p>
<div id="584da7d0" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create predicted values using a linear regression equation.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This line computes a predicted number of runs for each value of HR</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># using a specific linear formula:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   Predicted Runs = 452.358 + 1.814 × Home Runs</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Here:</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   - 452.358 is the intercept (the predicted number of runs when HR = 0)</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   - 1.814 is the slope (the increase in runs for each additional home run)</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   - bbr["HR"] is a column of home run values</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Because bbr["HR"] is a pandas Series (a whole column of data),</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co"># this calculation is done element-by-element.</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># The result is a new pandas Series of predicted run values,</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># one for each row in the dataset.</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="co"># IMPORTANT: This line does NOT return or display anything by itself.</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Why?</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="co"># - The result is not assigned to a variable.</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co"># - It is not printed using print().</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="co"># - It is not the final line of a notebook cell whose output is automatically shown.</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="co"># In Python, calculations only produce visible output if you:</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   (1) assign them to a variable,</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   (2) explicitly print them, or</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   (3) return them from a function.</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="co"># As written, Python performs the calculation and then immediately discards the result.</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>Pred <span class="op">=</span> <span class="fl">452.358</span> <span class="op">+</span> <span class="fl">1.814</span> <span class="op">*</span> bbr[<span class="st">"HR"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Although this line of Python code does not print anything for us to see, in Positron you can inspect the values in <code>Pred</code> in the <strong>VARIABLES</strong> tab under <strong>SESSION</strong>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/data-viewer.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>And the residual for each team:</p>
<div id="b33d8075" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>Resid <span class="op">=</span> Pred <span class="op">-</span> bbr[<span class="st">"R"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>A “best-fitting” line should somehow minimize these residuals — and our line actually minimizes the sum of the squares of the residuals — which is why it is often called the least-squares line.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/residuals.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>We now calculate the <em>sum of the squares of the residuals</em>:</p>
<div id="57484274" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(Resid <span class="op">*</span> Resid)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>602493.639948</code></pre>
</div>
</div>
<p>But if we try a different line, such as:</p>
<div id="0facefe5" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>Pred2 <span class="op">=</span> <span class="dv">410</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> bbr[<span class="st">"HR"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Then calculate the predicted values and residuals:</p>
<div id="c4afa27a" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>Resid2 <span class="op">=</span> Pred2 <span class="op">-</span> bbr[<span class="st">"R"</span>]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(Resid2 <span class="op">*</span> Resid2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>625121</code></pre>
</div>
</div>
<p>The sum of the squares for these residuals will be more than the sum of the squares of the residuals for our original model.</p>
<p>The best-fit line is also called the regression line. Remember: it is called the best-fit line because it minimizes the sum of the squares of the residuals.</p>
<hr>
</section>
<section id="important-info-regarding-this-linear-model" class="level2">
<h2 class="anchored" data-anchor-id="important-info-regarding-this-linear-model">Important Info Regarding This Linear Model</h2>
<p>To get more details about our best-fitting line:</p>
<div id="60ce1416" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display a detailed statistical summary of the fitted regression model.</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 'g' is a fitted statsmodels regression object (created using .fit()).</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The .summary() method generates a formatted table that includes:</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   - The estimated regression coefficients (intercept and slope)</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Standard errors of the estimates</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   - t-statistics and p-values for hypothesis tests</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   - R-squared and adjusted R-squared values</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Information about the sample size and model fit</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co"># This output is meant for human interpretation.</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co"># It prints a nicely formatted report rather than returning a simple number.</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co"># In Jupyter or Quarto, this summary will be displayed automatically</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co"># when this line is the last line of a code cell.</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>g.summary()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<table class="simpletable caption-top table table-sm table-striped small">
<caption>OLS Regression Results</caption>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Dep. Variable:</th>
<td>R</td>
<th data-quarto-table-cell-role="th">R-squared:</th>
<td>0.518</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Model:</th>
<td>OLS</td>
<th data-quarto-table-cell-role="th">Adj. R-squared:</th>
<td>0.515</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Method:</th>
<td>Least Squares</td>
<th data-quarto-table-cell-role="th">F-statistic:</th>
<td>191.1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date:</th>
<td>Mon, 26 Jan 2026</td>
<th data-quarto-table-cell-role="th">Prob (F-statistic):</th>
<td>5.40e-30</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Time:</th>
<td>11:32:10</td>
<th data-quarto-table-cell-role="th">Log-Likelihood:</th>
<td>-985.84</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">No. Observations:</th>
<td>180</td>
<th data-quarto-table-cell-role="th">AIC:</th>
<td>1976.</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Df Residuals:</th>
<td>178</td>
<th data-quarto-table-cell-role="th">BIC:</th>
<td>1982.</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Df Model:</th>
<td>1</td>
<th data-quarto-table-cell-role="th"></th>
<td></td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Covariance Type:</th>
<td>nonrobust</td>
<th data-quarto-table-cell-role="th"></th>
<td></td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small">
<tbody>
<tr class="odd">
<td></td>
<th data-quarto-table-cell-role="th">coef</th>
<th data-quarto-table-cell-role="th">std err</th>
<th data-quarto-table-cell-role="th">t</th>
<th data-quarto-table-cell-role="th">P&gt;|t|</th>
<th data-quarto-table-cell-role="th">[0.025</th>
<th data-quarto-table-cell-role="th">0.975]</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Intercept</th>
<td>452.3584</td>
<td>23.645</td>
<td>19.131</td>
<td>0.000</td>
<td>405.698</td>
<td>499.019</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">HR</th>
<td>1.8138</td>
<td>0.131</td>
<td>13.823</td>
<td>0.000</td>
<td>1.555</td>
<td>2.073</td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small">
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Omnibus:</th>
<td>11.424</td>
<th data-quarto-table-cell-role="th">Durbin-Watson:</th>
<td>1.788</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Prob(Omnibus):</th>
<td>0.003</td>
<th data-quarto-table-cell-role="th">Jarque-Bera (JB):</th>
<td>12.433</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Skew:</th>
<td>0.515</td>
<th data-quarto-table-cell-role="th">Prob(JB):</th>
<td>0.00200</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Kurtosis:</th>
<td>3.772</td>
<th data-quarto-table-cell-role="th">Cond. No.</th>
<td>983.</td>
</tr>
</tbody>
</table>
<br><br>Notes:<br>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</div>
</div>
<p>The most important thing to look at right now is the <strong>R-squared value</strong> which is 0.518. This means that 51.8% of the variation in runs can be explained by the number of homeruns.</p>
<p>The <strong>Residual standard error</strong> is another important piece of information, but not always printed in <code>statsmodels</code> summary table. The residual standard error gives us an idea of the size of the average residual. For our purposes, you can think of it as the standard deviation of the residuals. If it is not displayed in the table above you can compute it with the following:</p>
<div id="2b353999" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the residual standard error of the regression model.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 'g' is a fitted statsmodels OLS regression object.</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># In statsmodels:</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   - g.scale stores the estimated variance of the residuals (σ̂²),</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     not the standard deviation.</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># The residual standard error (often called RSE in statistics textbooks)</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co"># is the square root of this variance:</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   RSE = sqrt(σ̂²)</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co"># We use np.sqrt(...) to take the square root of g.scale.</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># The result is a single number that measures the typical size</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co"># of the model's prediction errors (in units of the response variable, Runs).</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>rse <span class="op">=</span> np.sqrt(g.scale)</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>58.178984370939745</code></pre>
</div>
</div>
<p>This means that we would expect about 95% of residuals to be within the interval:</p>
<pre><code>(−2 · 58.18, 2 · 58.18)</code></pre>
<hr>
</section>
<section id="your-turn-building-and-evaluating-new-baseball-statistics" class="level2">
<h2 class="anchored" data-anchor-id="your-turn-building-and-evaluating-new-baseball-statistics">Your Turn: Building and Evaluating New Baseball Statistics</h2>
<p>So far, we have fit a linear model predicting <strong>Runs (R)</strong> using an existing statistic.<br>
Now you will <strong>create new statistics</strong>, fit linear models using them, and evaluate how well they predict runs scored.</p>
<p>We will work with the following commonly used baseball statistics.</p>
<section id="definitions" class="level3">
<h3 class="anchored" data-anchor-id="definitions">Definitions</h3>
<ul>
<li><p><strong>BA (Batting Average):</strong></p>
<p><span class="math display">\[
\mathrm{BA}=\frac{1B+2B+3B+HR}{AB}
\]</span></p></li>
<li><p><strong>SLG (Slugging Percentage):</strong></p>
<p><span class="math display">\[
\mathrm{SLG}=\frac{1B+2\cdot 2B+3\cdot 3B+4\cdot HR}{AB}
\]</span></p></li>
<li><p><strong>OBP (On-Base Percentage):</strong></p>
<p><span class="math display">\[
\mathrm{OBP}=\frac{1B+2B+3B+HR+BB+HBP}{AB+BB+HBP+SF}
\]</span></p></li>
<li><p><strong>OPS (On-base Plus Slugging):</strong></p>
<p><span class="math display">\[
\mathrm{OPS}=\mathrm{OBP}+\mathrm{SLG}
\]</span></p></li>
</ul>
<hr>
</section>
</section>
<section id="what-to-produce-for-each-new-statistics" class="level2">
<h2 class="anchored" data-anchor-id="what-to-produce-for-each-new-statistics">What to produce for each new statistics</h2>
<p>For each of the four relationships below, you must produce all of the following:</p>
<ol type="1">
<li><strong>A scatter plot</strong> of runs versus the statistic.</li>
<li><strong>A best-fit regression line</strong> added to the scatter plot.</li>
<li><strong>A regression equation</strong> that predicts runs scored</li>
<li><strong>R-squared (</strong><span class="math inline">\(R^2\)</span>)</li>
<li><strong>Residual Standard Error (RSE)</strong></li>
<li>Report:
<ol type="1">
<li>The regression equation (using the intercept and slope)</li>
<li>The <span class="math inline">\(R^2\)</span> value and <strong>1-2 sentences interpreting it in context</strong></li>
<li>The RSE value and <strong>1-2 sentences interpreting it in context</strong></li>
</ol></li>
</ol>
<hr>
</section>
<section id="example-batting-average-ba" class="level2">
<h2 class="anchored" data-anchor-id="example-batting-average-ba">Example: Batting Average (BA)</h2>
<p>We will do <strong>batting average together</strong>, start to finish. Use this as a model for the remaining parts.</p>
<section id="create-batting-average" class="level3">
<h3 class="anchored" data-anchor-id="create-batting-average">Create Batting Average</h3>
<div id="create-ba" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Batting Average (BA) measures how often a team gets a hit per at-bat.</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># We compute it using singles, doubles, triples, and home runs, divided by at-bats.</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>bbr[<span class="st">"BA"</span>] <span class="op">=</span> (bbr[<span class="st">"1B"</span>] <span class="op">+</span> bbr[<span class="st">"2B"</span>] <span class="op">+</span> bbr[<span class="st">"3B"</span>] <span class="op">+</span> bbr[<span class="st">"HR"</span>]) <span class="op">/</span> bbr[<span class="st">"AB"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="scatter-plot-of-runs-vs-ba" class="level3">
<h3 class="anchored" data-anchor-id="scatter-plot-of-runs-vs-ba">Scatter Plot of Runs vs BA</h3>
<div id="cell-plot-r-vs-ba" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(bbr[<span class="st">"BA"</span>], bbr[<span class="st">"R"</span>])</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Batting Average (BA)"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Runs (R)"</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Runs vs Batting Average"</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="python1_files/figure-html/plot-r-vs-ba-output-1.png" id="plot-r-vs-ba" width="593" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="fit-the-linear-model-and-add-line-to-scatter-plot" class="level3">
<h3 class="anchored" data-anchor-id="fit-the-linear-model-and-add-line-to-scatter-plot">Fit the Linear Model and Add Line to Scatter Plot</h3>
<div id="cell-fit-model-ba" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>g_ba <span class="op">=</span> smf.ols(<span class="st">"R ~ BA"</span>, data<span class="op">=</span>bbr).fit()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the full regression summary</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>g_ba.summary()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="fit-model-ba" class="cell-output cell-output-display" data-execution_count="22">
<table class="simpletable caption-top table table-sm table-striped small">
<caption>OLS Regression Results</caption>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Dep. Variable:</th>
<td>R</td>
<th data-quarto-table-cell-role="th">R-squared:</th>
<td>0.677</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Model:</th>
<td>OLS</td>
<th data-quarto-table-cell-role="th">Adj. R-squared:</th>
<td>0.675</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Method:</th>
<td>Least Squares</td>
<th data-quarto-table-cell-role="th">F-statistic:</th>
<td>373.5</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date:</th>
<td>Mon, 26 Jan 2026</td>
<th data-quarto-table-cell-role="th">Prob (F-statistic):</th>
<td>1.42e-45</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Time:</th>
<td>11:32:10</td>
<th data-quarto-table-cell-role="th">Log-Likelihood:</th>
<td>-949.69</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">No. Observations:</th>
<td>180</td>
<th data-quarto-table-cell-role="th">AIC:</th>
<td>1903.</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Df Residuals:</th>
<td>178</td>
<th data-quarto-table-cell-role="th">BIC:</th>
<td>1910.</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Df Model:</th>
<td>1</td>
<th data-quarto-table-cell-role="th"></th>
<td></td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Covariance Type:</th>
<td>nonrobust</td>
<th data-quarto-table-cell-role="th"></th>
<td></td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small">
<tbody>
<tr class="odd">
<td></td>
<th data-quarto-table-cell-role="th">coef</th>
<th data-quarto-table-cell-role="th">std err</th>
<th data-quarto-table-cell-role="th">t</th>
<th data-quarto-table-cell-role="th">P&gt;|t|</th>
<th data-quarto-table-cell-role="th">[0.025</th>
<th data-quarto-table-cell-role="th">0.975]</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Intercept</th>
<td>-958.2445</td>
<td>89.689</td>
<td>-10.684</td>
<td>0.000</td>
<td>-1135.236</td>
<td>-781.253</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">BA</th>
<td>6535.7986</td>
<td>338.204</td>
<td>19.325</td>
<td>0.000</td>
<td>5868.393</td>
<td>7203.204</td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small">
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Omnibus:</th>
<td>2.005</td>
<th data-quarto-table-cell-role="th">Durbin-Watson:</th>
<td>1.656</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Prob(Omnibus):</th>
<td>0.367</td>
<th data-quarto-table-cell-role="th">Jarque-Bera (JB):</th>
<td>2.051</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Skew:</th>
<td>0.248</td>
<th data-quarto-table-cell-role="th">Prob(JB):</th>
<td>0.359</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Kurtosis:</th>
<td>2.833</td>
<th data-quarto-table-cell-role="th">Cond. No.</th>
<td>102.</td>
</tr>
</tbody>
</table>
<br><br>Notes:<br>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</div>
</div>
</section>
<section id="extract-key-quantities" class="level3">
<h3 class="anchored" data-anchor-id="extract-key-quantities">Extract Key Quantities</h3>
<div id="cell-extract-metrics-ba" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression coefficients (intercept and slope)</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>params_ba <span class="op">=</span> g_ba.params</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co"># R-squared</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>r2_ba <span class="op">=</span> g_ba.rsquared</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Residual standard error (RSE) = sqrt(estimated residual variance)</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>rse_ba <span class="op">=</span> np.sqrt(g_ba.scale)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>params_ba, r2_ba, rse_ba</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="extract-metrics-ba" class="cell-output cell-output-display" data-execution_count="23">
<pre><code>(Intercept    -958.244498
 BA           6535.798553
 dtype: float64,
 0.6772184385906694,
 47.59494819749408)</code></pre>
</div>
</div>
</section>
<section id="add-the-best-fit-line-to-the-plot" class="level3">
<h3 class="anchored" data-anchor-id="add-the-best-fit-line-to-the-plot">Add the Best-Fit Line to the Plot</h3>
<div id="cell-line-on-plot-ba" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(bbr[<span class="st">"BA"</span>], bbr[<span class="st">"R"</span>])</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># x-values for the line</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> bbr[<span class="st">"BA"</span>]</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Predicted runs from the fitted model:</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># y_hat = intercept + slope * x</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>intercept <span class="op">=</span> g_ba.params[<span class="st">"Intercept"</span>]</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>slope <span class="op">=</span> g_ba.params[<span class="st">"BA"</span>]</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Predicted values from the fitted regression line</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>y_hat <span class="op">=</span> intercept <span class="op">+</span> slope <span class="op">*</span> x</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw the fitted line on top of the scatter plot</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y_hat)</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Batting Average (BA)"</span>)</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Runs (R)"</span>)</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Runs vs Batting Average with Best-Fit Line"</span>)</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="python1_files/figure-html/line-on-plot-ba-output-1.png" id="line-on-plot-ba" width="593" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="write-your-interpretation-ba" class="level3">
<h3 class="anchored" data-anchor-id="write-your-interpretation-ba">Write Your Interpretation (BA)</h3>
<p>Report:</p>
<ul>
<li>The fitted linear regression model predicting runs scored from batting average is <span class="math display">\[R =−958.24+6535.80⋅BA\]</span> This equation says that, according to the model, an increase of 0.001 in batting average is associated with an increase of about 6.54 runs over the season.</li>
<li>The <span class="math inline">\(R^2\)</span> value for this model is: <span class="math display">\[R^2=0.677\]</span>This means that approximately 67.7% of the variation in runs scored across teams can be explained by differences in batting average alone. This is a relatively strong linear relationship, indicating that batting average is a meaningful predictor of run production, though a substantial portion of variability remains unexplained.</li>
<li>The RSE value for this model is <span class="math display">\[RSE = 47.6 \text{ runs}\]</span> This tells us that the model’s predictions are typically off by about 48 runs per season. In practical baseball terms, this is a sizable error, suggesting that while batting average explains much of the variation in runs, other factors (such as walks, power hitting, and situational hitting) also play an important role.</li>
</ul>
<hr>
</section>
</section>
<section id="your-turn-slg-obp-and-ops" class="level2">
<h2 class="anchored" data-anchor-id="your-turn-slg-obp-and-ops">Your Turn: SLG, OBP, and OPS</h2>
<p>For the remaining statistics, <strong>you must complete the analysis yourself</strong>.<br>
Template code is provided below. You are responsible for filling in the missing pieces.</p>
<section id="slugging-percentage-slg" class="level3">
<h3 class="anchored" data-anchor-id="slugging-percentage-slg">Slugging Percentage (SLG)</h3>
<div id="create-slg" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Create slugging percentage (SLG)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Hint: Use the definition above.</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>bbr[<span class="st">"SLG"</span>] <span class="op">=</span> ...</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-plot-r-vs-slg" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Scatter plot of Runs vs SLG</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>plt.scatter(bbr[<span class="st">"SLG"</span>], bbr[<span class="st">"R"</span>])</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Slugging Percentage (SLG)"</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Runs (R)"</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Runs vs Slugging Percentage"</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[26]</span><span class="ansi-green-fg">, line 3</span>
<span class="ansi-green-fg">      1</span> <span style="font-style:italic;color:rgb(95,135,135)"># TODO: Scatter plot of Runs vs SLG</span>
<span class="ansi-green-fg">      2</span> plt.figure()
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">3</span> <span class="ansi-yellow-bg">plt</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">scatter</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">bbr</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">SLG</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">bbr</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">R</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">      4</span> plt.xlabel(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Slugging Percentage (SLG)</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">      5</span> plt.ylabel(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Runs (R)</span><span class="ansi-yellow-fg">"</span>)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/pyplot.py:3903</span>, in <span class="ansi-cyan-fg">scatter</span><span class="ansi-blue-fg">(x, y, s, c, marker, cmap, norm, vmin, vmax, alpha, linewidths, edgecolors, plotnonfinite, data, **kwargs)</span>
<span class="ansi-green-fg">   3884</span> <span style="color:rgb(175,0,255)">@_copy_docstring_and_deprecators</span>(Axes.scatter)
<span class="ansi-green-fg">   3885</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">scatter</span>(
<span class="ansi-green-fg">   3886</span>     x: <span style="color:rgb(0,135,0)">float</span> | ArrayLike,
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">   3901</span>     **kwargs,
<span class="ansi-green-fg">   3902</span> ) -&gt; PathCollection:
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">3903</span>     __ret = <span class="ansi-yellow-bg">gca</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">scatter</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">   3904</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">x</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3905</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">y</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3906</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">s</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">s</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3907</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">c</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">c</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3908</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">marker</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">marker</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3909</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">cmap</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">cmap</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3910</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">norm</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">norm</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3911</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">vmin</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">vmin</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3912</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">vmax</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">vmax</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3913</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">alpha</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">alpha</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3914</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">linewidths</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">linewidths</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3915</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">edgecolors</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">edgecolors</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3916</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">plotnonfinite</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">plotnonfinite</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3917</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">{</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">data</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">:</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">}</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(0,135,0)" class="ansi-yellow-bg">if</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(175,0,255)" class="ansi-yellow-bg">is</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(175,0,255)" class="ansi-yellow-bg">not</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(0,135,0)" class="ansi-yellow-bg">None</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(0,135,0)" class="ansi-yellow-bg">else</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">{</span><span class="ansi-yellow-bg">}</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3918</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   3919</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   3920</span>     sci(__ret)
<span class="ansi-green-fg">   3921</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> __ret

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/__init__.py:1473</span>, in <span class="ansi-cyan-fg">_preprocess_data.&lt;locals&gt;.inner</span><span class="ansi-blue-fg">(ax, data, *args, **kwargs)</span>
<span class="ansi-green-fg">   1470</span> <span style="color:rgb(175,0,255)">@functools</span>.wraps(func)
<span class="ansi-green-fg">   1471</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">inner</span>(ax, *args, data=<span style="font-weight:bold;color:rgb(0,135,0)">None</span>, **kwargs):
<span class="ansi-green-fg">   1472</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> data <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">1473</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">func</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">   1474</span> <span class="ansi-yellow-bg">            </span><span class="ansi-yellow-bg">ax</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1475</span> <span class="ansi-yellow-bg">            </span><span class="ansi-yellow-bg">*</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">map</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">sanitize_sequence</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">args</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1476</span> <span class="ansi-yellow-bg">            </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">{</span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">:</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">sanitize_sequence</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">v</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(0,135,0)" class="ansi-yellow-bg">for</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">v</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(175,0,255)" class="ansi-yellow-bg">in</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">items</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">}</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   1478</span>     bound = new_sig.bind(ax, *args, **kwargs)
<span class="ansi-green-fg">   1479</span>     auto_label = (bound.arguments.get(label_namer)
<span class="ansi-green-fg">   1480</span>                   <span style="font-weight:bold;color:rgb(175,0,255)">or</span> bound.kwargs.get(label_namer))

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/axes/_axes.py:4876</span>, in <span class="ansi-cyan-fg">Axes.scatter</span><span class="ansi-blue-fg">(self, x, y, s, c, marker, cmap, norm, vmin, vmax, alpha, linewidths, edgecolors, plotnonfinite, **kwargs)</span>
<span class="ansi-green-fg">   4870</span>         linewidths = [
<span class="ansi-green-fg">   4871</span>             lw <span style="font-weight:bold;color:rgb(0,135,0)">if</span> lw <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span> mpl.rcParams[<span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">lines.linewidth</span><span class="ansi-yellow-fg">'</span>]
<span class="ansi-green-fg">   4872</span>             <span style="font-weight:bold;color:rgb(0,135,0)">for</span> lw <span style="font-weight:bold;color:rgb(175,0,255)">in</span> linewidths]
<span class="ansi-green-fg">   4874</span> offsets = np.ma.column_stack([x, y])
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">4876</span> collection = <span class="ansi-yellow-bg">mcoll</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">PathCollection</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">   4877</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">path</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">scales</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   4878</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">facecolors</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">colors</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   4879</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">edgecolors</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">edgecolors</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   4880</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">linewidths</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">linewidths</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   4881</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">offsets</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">offsets</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   4882</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">offset_transform</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">pop</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-fg ansi-yellow-bg">'</span><span class="ansi-yellow-fg ansi-yellow-bg">transform</span><span class="ansi-yellow-fg ansi-yellow-bg">'</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">transData</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   4883</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">alpha</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">alpha</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   4884</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   4885</span> collection.set_transform(mtransforms.IdentityTransform())
<span class="ansi-green-fg">   4886</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> colors <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/collections.py:1027</span>, in <span class="ansi-cyan-fg">PathCollection.__init__</span><span class="ansi-blue-fg">(self, paths, sizes, **kwargs)</span>
<span class="ansi-green-fg">   1013</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">__init__</span>(<span style="color:rgb(0,135,0)">self</span>, paths, sizes=<span style="font-weight:bold;color:rgb(0,135,0)">None</span>, **kwargs):
<span class="ansi-green-fg">   1014</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic" class="ansi-yellow-fg">"""</span>
<span class="ansi-green-fg">   1015</span> <span style="font-style:italic" class="ansi-yellow-fg">    Parameters</span>
<span class="ansi-green-fg">   1016</span> <span style="font-style:italic" class="ansi-yellow-fg">    ----------</span>
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">   1024</span> <span style="font-style:italic" class="ansi-yellow-fg">        Forwarded to `.Collection`.</span>
<span class="ansi-green-fg">   1025</span> <span style="font-style:italic" class="ansi-yellow-fg">    """</span>
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">1027</span>     <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">super</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">.</span><span class="ansi-blue-fg ansi-yellow-bg">__init__</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   1028</span>     <span style="color:rgb(0,135,0)">self</span>.set_paths(paths)
<span class="ansi-green-fg">   1029</span>     <span style="color:rgb(0,135,0)">self</span>.set_sizes(sizes)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/collections.py:197</span>, in <span class="ansi-cyan-fg">Collection.__init__</span><span class="ansi-blue-fg">(self, edgecolors, facecolors, linewidths, linestyles, capstyle, joinstyle, antialiaseds, offsets, offset_transform, norm, cmap, pickradius, hatch, urls, zorder, **kwargs)</span>
<span class="ansi-green-fg">    194</span>     <span style="color:rgb(0,135,0)">self</span>._joinstyle = <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    196</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> offsets <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">197</span>     offsets = <span class="ansi-yellow-bg">np</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">asanyarray</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">offsets</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">float</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    198</span>     <span style="font-style:italic;color:rgb(95,135,135)"># Broadcast (2,) -&gt; (1, 2) but nothing else.</span>
<span class="ansi-green-fg">    199</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> offsets.shape == (<span class="ansi-green-fg">2</span>,):

<span class="ansi-red-fg">TypeError</span>: float() argument must be a string or a real number, not 'ellipsis'</pre>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="python1_files/figure-html/plot-r-vs-slg-output-2.png" id="plot-r-vs-slg" width="581" height="416" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-fit-model-slg" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Fit the linear model for Runs vs SLG</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>g_slg <span class="op">=</span> smf.ols(<span class="st">"R ~ SLG"</span>, data<span class="op">=</span>bbr).fit()</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: view summary</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>g_slg.summary()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="fit-model-slg" class="cell-output cell-output-display" data-execution_count="27">
<table class="simpletable caption-top table table-sm table-striped small">
<caption>OLS Regression Results</caption>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Dep. Variable:</th>
<td>R</td>
<th data-quarto-table-cell-role="th">R-squared:</th>
<td>0.000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Model:</th>
<td>OLS</td>
<th data-quarto-table-cell-role="th">Adj. R-squared:</th>
<td>0.000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Method:</th>
<td>Least Squares</td>
<th data-quarto-table-cell-role="th">F-statistic:</th>
<td>nan</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date:</th>
<td>Mon, 26 Jan 2026</td>
<th data-quarto-table-cell-role="th">Prob (F-statistic):</th>
<td>nan</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Time:</th>
<td>11:32:11</td>
<th data-quarto-table-cell-role="th">Log-Likelihood:</th>
<td>-1051.5</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">No. Observations:</th>
<td>180</td>
<th data-quarto-table-cell-role="th">AIC:</th>
<td>2105.</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Df Residuals:</th>
<td>179</td>
<th data-quarto-table-cell-role="th">BIC:</th>
<td>2108.</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Df Model:</th>
<td>0</td>
<th data-quarto-table-cell-role="th"></th>
<td></td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Covariance Type:</th>
<td>nonrobust</td>
<th data-quarto-table-cell-role="th"></th>
<td></td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small">
<tbody>
<tr class="odd">
<td></td>
<th data-quarto-table-cell-role="th">coef</th>
<th data-quarto-table-cell-role="th">std err</th>
<th data-quarto-table-cell-role="th">t</th>
<th data-quarto-table-cell-role="th">P&gt;|t|</th>
<th data-quarto-table-cell-role="th">[0.025</th>
<th data-quarto-table-cell-role="th">0.975]</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Intercept</th>
<td>773.6500</td>
<td>6.227</td>
<td>124.248</td>
<td>0.000</td>
<td>761.363</td>
<td>785.937</td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small">
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Omnibus:</th>
<td>2.125</td>
<th data-quarto-table-cell-role="th">Durbin-Watson:</th>
<td>1.841</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Prob(Omnibus):</th>
<td>0.346</td>
<th data-quarto-table-cell-role="th">Jarque-Bera (JB):</th>
<td>2.069</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Skew:</th>
<td>0.194</td>
<th data-quarto-table-cell-role="th">Prob(JB):</th>
<td>0.355</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Kurtosis:</th>
<td>2.646</td>
<th data-quarto-table-cell-role="th">Cond. No.</th>
<td>1.00</td>
</tr>
</tbody>
</table>
<br><br>Notes:<br>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</div>
</div>
<div id="metrics-slg" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Compute and report:</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - regression coefficients</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - R-squared</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - residual standard error (RSE)</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - sum of squared residuals (SSR)</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Then write your interpretation in markdown below these outputs.</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co"># params_slg = ...</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co"># r2_slg = ...</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co"># rse_slg = ...</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="co"># ssr_slg = ...</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co"># params_slg, r2_slg, rse_slg, ssr_slg</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="line-on-plot-slg" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Add the best-fit line to the scatter plot (Runs vs SLG)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Hint: use g_slg.params[0] and g_slg.params[1]</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.figure()</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.scatter(bbr["SLG"], bbr["R"])</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># x = bbr["SLG"]</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># y_hat = ...</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.plot(x, y_hat)</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.xlabel("Slugging Percentage (SLG)")</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.ylabel("Runs (R)")</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.title("Runs vs SLG with Best-Fit Line")</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.show()</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="on-base-percentage-obp" class="level3">
<h3 class="anchored" data-anchor-id="on-base-percentage-obp">On-Base Percentage (OBP)</h3>
<div id="create-obp" class="cell" data-execution_count="30">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Create on-base percentage (OBP)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>bbr[<span class="st">"OBP"</span>] <span class="op">=</span> ...</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="plot-r-vs-obp" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Scatter plot of Runs vs OBP</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Write your code here)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fit-model-obp" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Fit the linear model for Runs vs OBP</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># g_obp = ...</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="metrics-obp" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Compute and report params, R-squared, RSE, SSR for OBP</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># params_obp = ...</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># r2_obp = ...</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># rse_obp = ...</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ssr_obp = ...</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co"># params_obp, r2_obp, rse_obp, ssr_obp</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="line-on-plot-obp" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Add the best-fit line to the scatter plot (Runs vs OBP)</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Write your code here)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
<section id="ops-on-base-plus-slugging" class="level3">
<h3 class="anchored" data-anchor-id="ops-on-base-plus-slugging">OPS (On-Base Plus Slugging)</h3>
<div id="create-ops" class="cell" data-execution_count="35">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Create OPS</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Hint: OPS = OBP + SLG</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>bbr[<span class="st">"OPS"</span>] <span class="op">=</span> ...</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="plot-r-vs-ops" class="cell" data-execution_count="36">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Scatter plot of Runs vs OPS</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Write your code here)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fit-model-ops" class="cell" data-execution_count="37">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Fit the linear model for Runs vs OPS</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># g_ops = ...</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="metrics-ops" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Compute and report params, R-squared, RSE, SSR for OPS</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># params_ops = ...</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># r2_ops = ...</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># rse_ops = ...</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ssr_ops = ...</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co"># params_ops, r2_ops, rse_ops, ssr_ops</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="line-on-plot-ops" class="cell" data-execution_count="39">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Add the best-fit line to the scatter plot (Runs vs OPS)</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Write your code here)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
</section>
</section>
<section id="when-youre-done" class="level2">
<h2 class="anchored" data-anchor-id="when-youre-done">When You’re Done</h2>
<p>Answer the following question <strong>in complete sentences</strong>:</p>
<p>Which of BA, SLG, OBP, or OPS gives the <strong>highest</strong> <span class="math inline">\(R^2\)</span> when predicting runs?<br>
What does that suggest about what matters most for scoring runs?</p>
<hr>
</section>
<section id="submission" class="level2">
<h2 class="anchored" data-anchor-id="submission">Submission</h2>
<p>Now submit your assignment by commiting your work to your local git repository and pushing the changes to your classroom Github repo. To do so in Positron</p>
<ol type="1">
<li><p>Click the “Source Control” icon on the left.<br>
<img src="images/source_control.png" width="32" height="32"></p></li>
<li><p>Type a message summarizing your work and push the commit button. <img src="images/commit.png" class="img-fluid" width="450"></p></li>
<li><p>Click the Push icon.</p>
<p><img src="images/push.png" class="img-fluid"></p></li>
<li><p>Lastly, check on github classroom that you have committed your work!</p></li>
</ol>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>